[gd_scene load_steps=15 format=3 uid="uid://gl2yqorlw47u"]

[ext_resource type="Script" path="res://scenes/ecs/parent/enemy.gd" id="1_4ppfl"]
[ext_resource type="PackedScene" uid="uid://mcwanb7c0jec" path="res://scenes/ecs/components/health_component.tscn" id="2_oaa2o"]
[ext_resource type="PackedScene" uid="uid://butffx7k8o22r" path="res://scenes/ecs/components/knockback_component.tscn" id="3_ae352"]
[ext_resource type="PackedScene" uid="uid://du23o27jj4r7b" path="res://scenes/ecs/components/attack_component.tscn" id="4_lf5lc"]
[ext_resource type="Material" uid="uid://doylh3qwywvdw" path="res://visuals/materials/red.tres" id="5_84hcb"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://dyyn0nbob5upy" path="res://resources/blend_trees/basic_range_enemy_blend_tree.tres" id="6_8jhyb"]
[ext_resource type="PackedScene" uid="uid://b3lrkttrntyr5" path="res://visuals/models/characters/robots_S4/Robot_One.glb" id="6_yl42m"]
[ext_resource type="Texture2D" uid="uid://bupinxjkachkc" path="res://visuals/textures/grid_texture.png" id="7_lqaki"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2dksx"]

[sub_resource type="SphereMesh" id="SphereMesh_drfhg"]

[sub_resource type="SphereMesh" id="SphereMesh_yfg4t"]

[sub_resource type="SphereShape3D" id="SphereShape3D_brd60"]

[sub_resource type="SphereMesh" id="SphereMesh_jgbnc"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uf3pd"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.896635, 0, 0.0937623, 0.317647)
albedo_texture = ExtResource("7_lqaki")
uv1_scale = Vector3(10, 10, 10)
uv2_scale = Vector3(10, 10, 10)

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 8192
collision_mask = 30847
script = ExtResource("1_4ppfl")
_weapon_range = null
_weapon_cooldown_time = null
_chase_targets = Array[int]([4096])
_target_obstructions = Array[int]([1, 2, 4, 8, 32, 128, 512, 2048])
_random_patrol_points = null
_patrolling_movement_speed = null
_patrolling_rotation_speed = null
_patrolling_idle_duration = null
_patrolling_radius_detection = null
_patrolling_cone_degrees_detection = null
_patrolling_area_variance = null
_chasing_movement_speed = 8.0
_chasing_rotation_speed = null
_chase_radius_detection = null
_chasing_detection_cone_degrees = null
_chase_duration = null
_chase_alert_duration = null
_attacking_detection_cone_degrees = null
_sweeping_movement_speed = null
_sweeping_rotation_speed = 4.0
_sweeping_detection_radius = null
_sweeping_detection_cone_degrees = null
_sweeping_state_duration = null
_sweeping_idle_duration = null
_sweeping_area_variance = null
_movement_speed = 10.0
_rotation_speed = null

[node name="Components" type="Node" parent="."]

[node name="HealthComponent" parent="Components" instance=ExtResource("2_oaa2o")]

[node name="KnockbackComponent" parent="Components" instance=ExtResource("3_ae352")]

[node name="AttackComponent" parent="Components" instance=ExtResource("4_lf5lc")]

[node name="PrimaryCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0403, 0)
shape = SubResource("CapsuleShape3D_2dksx")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionPoint" type="MeshInstance3D" parent="."]
transform = Transform3D(0.25, 0, 0, 0, 0.25, 0, 0, 0, 0.25, 0, 1.55523, -0.519085)
mesh = SubResource("SphereMesh_drfhg")

[node name="FirePoint" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 1, -1.08947)
mesh = SubResource("SphereMesh_yfg4t")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("5_84hcb")

[node name="EnemyVisuals" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.01197, 0)

[node name="AnimationTree" type="AnimationTree" parent="EnemyVisuals"]
root_node = NodePath("../Robot_One")
tree_root = ExtResource("6_8jhyb")
anim_player = NodePath("../Robot_One/AnimationPlayer")
parameters/Attack/active = false
parameters/Attack/internal_active = false
parameters/Attack/request = 0
parameters/Attack_TimeScale/scale = 1.0
parameters/Transition/current_state = ""
parameters/Transition/transition_request = ""
parameters/Transition/current_index = -1

[node name="Robot_One" parent="EnemyVisuals" instance=ExtResource("6_yl42m")]

[node name="Skeleton3D" parent="EnemyVisuals/Robot_One/Rig" index="0"]
bones/4/rotation = Quaternion(-0.514121, -0.485468, -0.485468, 0.514122)
bones/4/scale = Vector3(0.999999, 0.999999, 1)
bones/5/rotation = Quaternion(1.64805e-09, -5.95036e-08, -0.0552855, 0.998471)
bones/6/rotation = Quaternion(-9.73784e-11, -2.98437e-10, 0.0266581, 0.999645)
bones/6/scale = Vector3(1, 1, 1)
bones/7/rotation = Quaternion(1.20018e-09, 1.33102e-07, -5.4552e-06, 1)
bones/8/rotation = Quaternion(1.60975e-09, 1.60975e-09, -0.707107, 0.707107)
bones/8/scale = Vector3(1, 1, 1)
bones/9/rotation = Quaternion(-0.514121, 0.485468, 0.485468, 0.514122)
bones/9/scale = Vector3(0.999999, 0.999999, 1)
bones/10/rotation = Quaternion(1.64805e-09, 5.95036e-08, 0.0552855, 0.998471)
bones/11/rotation = Quaternion(-9.73784e-11, 2.98437e-10, -0.0266581, 0.999645)
bones/11/scale = Vector3(1, 1, 1)
bones/13/rotation = Quaternion(1.60973e-09, -1.60973e-09, 0.707107, 0.707107)
bones/13/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(0.999849, -7.13276e-08, -1.20427e-08, 0.0173732)
bones/15/scale = Vector3(1, 1, 1)
bones/16/rotation = Quaternion(0.106225, 6.86528e-08, -7.37699e-08, 0.994342)
bones/17/rotation = Quaternion(-0.455239, 1.61971e-08, -3.43568e-08, 0.890369)
bones/18/rotation = Quaternion(4.77599e-08, 0.920355, -0.391084, 5.80156e-08)
bones/19/rotation = Quaternion(0.999849, 7.42656e-08, -3.17263e-08, 0.0173732)
bones/19/scale = Vector3(1, 1, 1)
bones/21/rotation = Quaternion(-0.455239, 1.65982e-07, 2.25094e-09, 0.890369)
bones/22/rotation = Quaternion(2.12198e-08, 0.920355, -0.391084, 6.45059e-08)
bones/23/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/24/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/25/rotation = Quaternion(7.10544e-15, -1.38321e-22, 1, -2.33983e-34)
bones/26/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/26/scale = Vector3(1, 1, 1)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(1, -3.10863e-15, 1.94707e-07, -6.91739e-22)
bones/30/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/31/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/32/rotation = Quaternion(7.10544e-15, -1.38321e-22, 1, -2.33983e-34)
bones/33/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.391084, -6.885e-08, -6.56288e-08, 0.920355)
bones/34/scale = Vector3(1, 1, 1)
bones/37/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/38/rotation = Quaternion(0.5, 0.5, 0.5, -0.5)
bones/39/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/40/rotation = Quaternion(-0.5, 0.5, 0.5, 0.5)

[node name="DetectionArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2348, 0)
collision_layer = 0
collision_mask = 0

[node name="DetectionCollider" type="CollisionShape3D" parent="DetectionArea"]
shape = SubResource("SphereShape3D_brd60")

[node name="DetectionVisual" type="MeshInstance3D" parent="DetectionArea"]
mesh = SubResource("SphereMesh_jgbnc")
surface_material_override/0 = SubResource("StandardMaterial3D_uf3pd")

[editable path="EnemyVisuals/Robot_One"]
