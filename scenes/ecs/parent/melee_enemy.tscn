[gd_scene load_steps=15 format=3 uid="uid://gl2yqorlw47u"]

[ext_resource type="Script" path="res://scenes/ecs/parent/enemy.gd" id="1_4ppfl"]
[ext_resource type="PackedScene" uid="uid://bcn74yjmdii2d" path="res://scenes/ecs/components/health_component.tscn" id="2_oaa2o"]
[ext_resource type="PackedScene" uid="uid://butffx7k8o22r" path="res://scenes/ecs/components/knockback_component.tscn" id="3_ae352"]
[ext_resource type="PackedScene" uid="uid://du23o27jj4r7b" path="res://scenes/ecs/components/attack_component.tscn" id="4_lf5lc"]
[ext_resource type="Material" uid="uid://doylh3qwywvdw" path="res://visuals/materials/red.tres" id="5_84hcb"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://dyyn0nbob5upy" path="res://resources/blend_trees/basic_enemy_blend_tree.tres" id="6_8jhyb"]
[ext_resource type="PackedScene" uid="uid://b3lrkttrntyr5" path="res://visuals/models/characters/robots_S4/Robot_One.glb" id="6_yl42m"]
[ext_resource type="Texture2D" uid="uid://bupinxjkachkc" path="res://visuals/textures/grid_texture.png" id="7_lqaki"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2dksx"]

[sub_resource type="SphereMesh" id="SphereMesh_drfhg"]

[sub_resource type="SphereMesh" id="SphereMesh_yfg4t"]

[sub_resource type="SphereShape3D" id="SphereShape3D_brd60"]

[sub_resource type="SphereMesh" id="SphereMesh_jgbnc"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uf3pd"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.896635, 0, 0.0937623, 0.317647)
albedo_texture = ExtResource("7_lqaki")
uv1_scale = Vector3(10, 10, 10)
uv2_scale = Vector3(10, 10, 10)

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 8192
collision_mask = 30847
script = ExtResource("1_4ppfl")
_chase_targets = Array[int]([4096])
_target_obstructions = Array[int]([1, 2, 4, 8, 32, 128, 512, 2048])
_detection_radius_patrolling = 16.0
_chasing_movement_speed = 4.0
_sweeping_rotation_speed = 4.0
_detection_radius_sweeping = 18.0
_sweep_radius = Vector3(8, 0, 8)
_movement_speed = 10.0

[node name="Components" type="Node" parent="."]

[node name="HealthComponent" parent="Components" instance=ExtResource("2_oaa2o")]

[node name="KnockbackComponent" parent="Components" instance=ExtResource("3_ae352")]

[node name="AttackComponent" parent="Components" instance=ExtResource("4_lf5lc")]

[node name="PrimaryCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0403, 0)
shape = SubResource("CapsuleShape3D_2dksx")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionPoint" type="MeshInstance3D" parent="."]
transform = Transform3D(0.25, 0, 0, 0, 0.25, 0, 0, 0, 0.25, 0, 1.55523, -0.519085)
mesh = SubResource("SphereMesh_drfhg")

[node name="FirePoint" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 1, -1.08947)
mesh = SubResource("SphereMesh_yfg4t")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("5_84hcb")

[node name="EnemyVisuals" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.01197, 0)

[node name="AnimationTree" type="AnimationTree" parent="EnemyVisuals"]
root_node = NodePath("../Robot_One")
tree_root = ExtResource("6_8jhyb")
anim_player = NodePath("../Robot_One/AnimationPlayer")
parameters/Attack_1_OneShot/active = false
parameters/Attack_1_OneShot/internal_active = false
parameters/Attack_1_OneShot/request = 0
parameters/Attack_1_TimeScale/scale = 1.0
parameters/Attack_2_OneShot/active = false
parameters/Attack_2_OneShot/internal_active = false
parameters/Attack_2_OneShot/request = 0
parameters/Attack_2_TimeScale/scale = 1.0
parameters/Transition/current_state = ""
parameters/Transition/transition_request = ""
parameters/Transition/current_index = -1

[node name="Robot_One" parent="EnemyVisuals" instance=ExtResource("6_yl42m")]

[node name="Skeleton3D" parent="EnemyVisuals/Robot_One/Rig" index="0"]
bones/1/position = Vector3(1.11963e-10, 0.410155, -0.000469607)
bones/1/rotation = Quaternion(-0.0593905, -0.0802706, 0.00660844, 0.99498)
bones/2/rotation = Quaternion(-0.0306253, -0.144201, 0.00980381, 0.989026)
bones/3/rotation = Quaternion(-0.0587298, 0.000595483, -0.00327398, 0.998268)
bones/4/rotation = Quaternion(-0.628444, 0.0689495, -0.439867, 0.637825)
bones/5/rotation = Quaternion(-8.84278e-08, -1.64594e-08, -0.576174, 0.817327)
bones/6/rotation = Quaternion(-9.73784e-11, -2.98437e-10, 0.0266581, 0.999645)
bones/7/rotation = Quaternion(-0.439838, -0.143849, 0.171286, 0.869776)
bones/8/rotation = Quaternion(1.60975e-09, 1.60975e-09, -0.707107, 0.707107)
bones/9/rotation = Quaternion(-0.471466, 0.530784, 0.702726, -0.0465208)
bones/10/rotation = Quaternion(-7.24069e-09, 7.9783e-08, 0.244664, 0.969608)
bones/11/rotation = Quaternion(-9.73784e-11, 2.98437e-10, -0.0266581, 0.999645)
bones/12/rotation = Quaternion(-0.293762, 0.408033, 0.0667193, 0.861836)
bones/13/rotation = Quaternion(-0.00943077, 0.00915222, 0.766164, 0.642511)
bones/14/rotation = Quaternion(0.00843551, 0.217479, -0.0420203, 0.975124)
bones/15/rotation = Quaternion(0.976765, 0.0272627, -0.0661004, -0.202036)
bones/16/rotation = Quaternion(0.00197423, 6.98452e-08, -9.42689e-10, 0.999998)
bones/17/rotation = Quaternion(-0.449612, -0.264271, -0.0185404, 0.853033)
bones/18/rotation = Quaternion(-0.00461513, 0.914957, -0.403507, 0.00378226)
bones/19/rotation = Quaternion(0.995171, -0.0295964, -0.0934007, 0.00599172)
bones/20/rotation = Quaternion(0.0912064, -6.83134e-08, 6.63239e-08, 0.995832)
bones/21/rotation = Quaternion(-0.394751, 0.114285, 0.0109882, 0.911586)
bones/22/rotation = Quaternion(-0.000176592, 0.920415, -0.390942, 4.01076e-05)
bones/23/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/24/position = Vector3(0.213918, 0.0259903, 0.173866)
bones/24/rotation = Quaternion(-0.705092, 0.0533355, 0.0533355, 0.705092)
bones/25/rotation = Quaternion(9.65792e-09, 1.77955e-09, 0.985719, -0.168398)
bones/26/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/28/rotation = Quaternion(1, -3.10863e-15, 1.94707e-07, -6.91739e-22)
bones/30/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/31/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/32/rotation = Quaternion(-5.83589e-09, 6.43837e-10, 0.994809, 0.101756)
bones/33/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/38/position = Vector3(0.531539, 0.882501, 0.00655193)
bones/38/rotation = Quaternion(0.613889, -4.30383e-05, 0.789392, 4.29153e-05)
bones/39/position = Vector3(-0.453507, 0.648903, -0.428085)
bones/40/position = Vector3(-0.509508, 1.06723, 0.142604)
bones/40/rotation = Quaternion(-0.510211, 0.481733, 0.43971, -0.560601)

[node name="DetectionArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2348, 0)
collision_layer = 0
collision_mask = 0

[node name="DetectionCollider" type="CollisionShape3D" parent="DetectionArea"]
shape = SubResource("SphereShape3D_brd60")

[node name="DetectionVisual" type="MeshInstance3D" parent="DetectionArea"]
mesh = SubResource("SphereMesh_jgbnc")
surface_material_override/0 = SubResource("StandardMaterial3D_uf3pd")

[editable path="EnemyVisuals/Robot_One"]
